"use strict";!function(){var a=document.querySelector(".product-list"),b=a.querySelectorAll(".choice-basket"),c=document.querySelector(".basket"),d=c.querySelector(".basket-link"),e=c.querySelector(".amount-product"),g=(c.querySelectorAll(".basket-product"),c.querySelectorAll(".btn-delete")||null),h=function(){var a=document.querySelector("#basket-wrapper-template").content.cloneNode(!0);c.appendChild(a),c.classList.add("basket-full"),d.classList.add("basket-link-full")},i=function(a,b,d){var e=c.querySelector(".basket-list"),f=c.querySelector(".basket-sum"),g=+f.textContent.replace(" \u0440\u0443\u0431.",""),h=document.querySelector("#basket-product-template").content.cloneNode(!0),i=h.querySelector("img"),k=h.querySelector(".product-name").children[0],l=h.querySelector(".price-kilo"),m=h.querySelector(".price-total"),n=h.querySelector(".btn-delete");i.setAttribute("src",a),k.textContent=b,l.textContent=d+" \u0440\u0443\u0431",m.textContent=1.5*d+" \u0440\u0443\u0431.",f.textContent=g+1.5*d+" \u0440\u0443\u0431.",n.addEventListener("click",j),e.appendChild(h)},j=function(a){a.preventDefault();var b=c.querySelector(".basket-sum"),f=+b.textContent.replace(" \u0440\u0443\u0431.",""),g=+e.textContent.split(" ")[0],h=a.target,i=h.parentElement,j=null;for(g-=1,1===g?e.textContent=g+" \u0442\u043e\u0432\u0430\u0440":g>1&&g<5?e.textContent=g+" \u0442\u043e\u0432\u0430\u0440\u0430":g>=5?e.textContent=g+" \u0442\u043e\u0432\u0430\u0440\u043e\u0432":(document.querySelector(".basket-wrapper").remove(),c.classList.remove("basket-full"),d.classList.remove("basket-link-full"),e.textContent="\u041f\u0443\u0441\u0442\u043e");;)if(i=i.parentElement,"basket-product"===i.className)return j=i.querySelector(".price-total").textContent.replace(" \u0440\u0443\u0431.",""),b.textContent=f-j+" \u0440\u0443\u0431.",void i.remove()},k=function(a){a.preventDefault();var b=a.target.parentElement,c=b.querySelector("img").getAttribute("src"),d=b.querySelector(".product-title").textContent,f=b.querySelector(".product-price").textContent.replace("\u20bd/\u043a\u0433",""),g=+e.textContent.split(" ")[0]||0;g+=1,1===g?(h(),e.textContent=g+" \u0442\u043e\u0432\u0430\u0440"):e.textContent=g>1&&g<5?g+" \u0442\u043e\u0432\u0430\u0440\u0430":g+" \u0442\u043e\u0432\u0430\u0440\u043e\u0432",i(c,d,f)};g&&[].forEach.call(g,function(a){a.addEventListener("click",j)}),[].forEach.call(b,function(a){a.addEventListener("click",k)})}();
